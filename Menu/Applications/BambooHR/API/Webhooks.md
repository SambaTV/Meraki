Webhooks allow you to monitor changes made in BambooHR. BambooHR will watch for changes in fields you specify and post information to a location of your choice.

# Configuration
admin user in the tools section by clicking on the link "Webhooks".
      https://www.bamboohr.com/contact.php
     

 # specify which fields they want to monitor

The user can also configure which fields will be posted by the webhook. Any field in the database can be posted. Fields can be posted with an alternate name, but use BambooHR's field names (in English) by default.

        Department
        Division
        EEO Job Category
        Employee #
        Status
        Employment Status
        First Name
        Hire Date
        Home Email
        Job Title
        Last Name
        Location
        Middle Name
        Preferred Name
        Termination Date
        Work Email
        Work Phone
        Work Ext.
        City
        Rehire Date
        
# Useful 
   Useful for Updated 
         Status Active
        Employment Status
   
   Useful for Inserted  
   
   Useful for Deleted 

# CronJob... Kinda
Users can specify a schedule of when they want webhooks to fire (only at 12:00pm or every hour at 5 after the hour). They can also limit how often a webhook will fire by setting a maximum number of requests per interval in seconds.

# Security 
BambooHR will post to an HTTP or HTTPS url, but HTTPS is recommended. Best practices suggest that you specify a secret key when configuring a webhook and that your webhook check for that key, so that only systems that have the secret key can post to your webhook

        http://example.com/webHook.php?key=123abc
        
# Data format
Employee data will be batched when possible, so that if multiple employees' data has been changed, they will be sent together.
Data will be posted in the standard format of an HTML form submission. The structure will be:

      employees[<employeeId>][changedFields][0]=Employee #
      employees[<employeeId>][changedFields][1]=First Name
      employees[<employeeId>][Employee #]=9
      employees[<employeeId>][First name]=Robert
      employees[<employeeId>][Last name]=Smith
      employees[<employeeId>][Job title]=Engineer
      
 where "changedFields" is an array of fields that were changed. If the field is included in the employee data, it will give the name of the posted field. Otherwise, a field ID will be given, and more information about the field can be looked up using the API.
 
 More than one employeeId may be present as a key in the employees structure. While this structure will not be changed, more or less fields with different names may be sent to you, as configured by the user.	In addition, in the future, we may add more context to the structure, so it is good practice to ignore fields that your webhook does not recognize.
 
 
 https://support.litmos.com/hc/en-us/articles/227738887-BambooHR-Integration
 
 # Tracking specific field changes

Important Note: Webhooks are not designed for field mapping.

BambooHR provides a feature called Webhooks, which is an optional feature that can be used to automatically push updated employee data (so that administrators do not have to continually press "sync Bamboo employee list" to stage employee updates . A BambooHR Administrator can configure a Litmos Webhook by following these steps.

 1. Navigate to Settings > Account > Webhooks
 2. Give a meaningful name to the Webhook

__JC Integration__
      
 3. Navigate to the "What Fields Do You Want To Post" section

 4. Next, select the fields from the "What Fields Do You Want To Monitor" section, 
         as these will be the fields that POST data requests to JC to update the information of employees in JC. Remember, there are only certain fields that can be updated in JC.



5. Select the fields to monitor for JC. The image below shows the fields can be updated in JC: 
https://support.litmos.com/hc/en-us/article_attachments/115000029394/bamboo_Litmos_Access_POST.PNG


6. Select the fields to post to JC. The image in the screen below are the fields that JC supports for Post:

https://support.litmos.com/hc/article_attachments/115001634873/BambooHR_Webhooks_Monitor.JPG

7. Select the Data format as JSON 



8. The Webhook endpoint to be entered into BambooHR can be found in JC by navigating to Account settings --> Integrations --> BambooHR --> click on integration listing:



9. The API Key provided in this URL is specific to the Webhook endpoint generated for your account, and is not to be edited.



10. Specify a schedule of when the webhooks fire (eg. only at 12:00pm or every hour at 5 after the hour). You can also limit how often a webhook will fire by setting a maximum number of requests per interval in seconds.



If you plan to set up Webhooks, view the JC API key generated by clicking on the JC API icon in the "Integrations" tab. Please ensure that the API key being used in the Webhook has permission to all fields and users in the range of the Webhook. (Optional)

Added Note: JC accepts only the subdomain name. It can have domains such as .bamboohr.com, .bamboohr.co.uk etc

# Handling Incoming Webhooks in PHP

  ## local host

       1 <?php
       2 
       3 if($json = json_decode(file_get_contents("php://input"), true)) {
       4     print_r($json);
       5     $data = $json;
       6 } else {
       7     print_r($_POST);
       8     $data = $_POST;
       9 }
      10 
      11 echo "Saving data ...\n";
      12 $url = "http://localhost:5984/incoming";
      13 
      14 $meta = &#91;"received" => time(),
      15     "status" => "new",
      16     "agent" => $_SERVER['HTTP_USER_AGENT']];
      17 
      18 $options = ["http" => [
      19     "method" => "POST",
      20     "header" => ["Content-Type: application/json"],
      21     "content" => json_encode(["data" => $data, "meta" => $meta])]
      22     ];
      23 
      24 $context = stream_context_create($options);
      25 $response = file_get_contents($url, false, $context);
## http

       1 <?php
       2 
       3 if($json = json_decode(file_get_contents("php://input"), true)) {
       4     print_r($json);
       5     $data = $json;
       6 } else {
       7     print_r($_POST);
       8     $data = $_POST;
       9 }
      10 
      11 echo "Saving data ...\n";
      12 $url = "http://localhost:8888/incoming";
      13 
      14 $meta = &#91;"received" => time(),
      15     "status" => "new",
      16     "agent" => $_SERVER['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/11.1.2 Safari/605.1.15']];
      17 
      18 $options = ["http" => [
      19     "method" => "POST",
      20     "header" => ["Content-Type: application/json"],
      21     "content" => json_encode(["data" => $data, "meta" => $meta])]
      22     ];
      23 
      24 $context = stream_context_create($options);
      25 $response = file_get_contents($url, false, $context);
